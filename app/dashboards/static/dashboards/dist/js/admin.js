(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={admin:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(e,t,a){e.exports=a("9150")},9150:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"modals"},[a("ErrorAlert",{ref:"errorAlert"}),a("SuccessAlert",{ref:"successAlert"}),a("ConfirmDialog",{ref:"confirmDialog"})],1),a("v-navigation-drawer",{attrs:{permanent:"",app:"",absolute:""}},[a("v-list",[a("v-list-item",[a("div",{staticClass:"account"},[a("router-link",{attrs:{to:{name:"AccountDetail"}}},[e._v(" Мой аккаунт ")])],1)]),a("v-divider"),a("v-list-item",[a("div",{staticClass:"companies"},[a("router-link",{attrs:{to:"/companies"}},[e._v(" Юридические лица ")])],1)]),a("v-divider"),a("v-list-item",[a("div",{staticClass:"positions"},[a("router-link",{attrs:{to:"/positions"}},[e._v(" Должности ")])],1)]),a("v-divider"),a("v-list-item",[a("div",{staticClass:"docs"},[e._v(" Документация ")])])],1)],1),a("v-main",{attrs:{app:""}},[a("router-view")],1)],1)},o=[],s=a("0c72"),i=a("5c4d"),c=a("5191"),l={name:"App",data:function(){return{}},components:{ErrorAlert:s["a"],SuccessAlert:i["a"],ConfirmDialog:c["a"]}},u=l,d=a("2877"),m=a("6544"),p=a.n(m),v=a("7496"),f=a("ce7e"),h=a("8860"),b=a("da13"),y=a("f6c4"),g=a("f774"),x=Object(d["a"])(u,n,o,!1,null,null,null),C=x.exports;p()(x,{VApp:v["a"],VDivider:f["a"],VList:h["a"],VListItem:b["a"],VMain:y["a"],VNavigationDrawer:g["a"]});var w=a("8c4f"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Редактировать учетную запись")]),a("v-card-text",[e.accountInfo?a("AccountEditForm",{ref:"accountEditForm",attrs:{accountUuid:e.accountUuid,accountRole:e.accountRole}}):e._e()],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Изменить пароль")]),a("v-card-text",[a("ChangePasswordForm",{attrs:{accountUuid:e.accountUuid,accountRole:e.accountRole}})],1)],1)],1)],1)],1)},k=[],E=(a("96cf"),a("1da1")),R=a("29b8"),U=a("4190"),F=a("db49"),I=a("a9e30"),A=a("a287"),V=a("6aa7"),j={components:{AccountEditForm:R["a"],ChangePasswordForm:U["a"]},data:function(){return{accountRole:I["a"].admin[0],accountInfo:null}},computed:{accountUuid:function(){return this.$cookies.get(F["a"].userUuidCookie)}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAccountInfo();case 2:return e.accountInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.accountEditForm.setInitial(e.accountInfo)}));case 5:case"end":return t.stop()}}),t)})))()},methods:{getAccountInfo:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(A["a"])().detail(e.accountUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.accountUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:V["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию об учетной записи. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},O=j,$=a("b0af"),D=a("99d9"),T=a("62ad"),P=a("a523"),S=a("0fd9"),L=Object(d["a"])(O,_,k,!1,null,null,null),B=L.exports;p()(L,{VCard:$["a"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VRow:S["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-4"},[a("v-card-title",[e._v("Юридические лица")]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{label:"Поиск юрлица","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetCreateCompanyForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),r),[e._v(" Добавить юрлицо ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Добавить новое юрлицо")]),a("v-card-text",[a("CreateCompanyForm",{ref:"createCompanyform",on:{onReload:function(t){return e.reloadCompanyList()}}})],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("CompanyListTable",{ref:"companyListTable",attrs:{search:e.search}})],1)],1)],1)],1)],1)},W=[],M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ListTable",{attrs:{headers:e.headers,items:e.items,search:e.search},on:{onToArchiveItem:e.toAchiveCompany,onToWorkItem:e.toWorkCompany,onDeleteItem:e.deleteCompany},scopedSlots:e._u([{key:"itemLink",fn:function(t){var r=t.item;return[a("div",{staticClass:"detail-link"},[a("router-link",{attrs:{to:{name:"CompanyDetail",params:{companyUuid:r.uuid}}}},[e._v(e._s(r.linkText))])],1)]}}])})},H=[],J=a("b85c"),K=a("f414"),z=a("da39"),N=a("ddc2"),Z={mixins:[z["a"]],components:{ListTable:N["a"]},data:function(){return{headers:[{text:"Название юр. лица",value:"linkText"},{text:"Город",value:"city"},{text:"Адрес",value:"address"},{text:"Статус",value:"status"},{text:"Действия",value:"actions",sortable:!1}],companiesList:[]}},props:{search:String},computed:{api:function(){return Object(A["c"])()},items:function(){var e,t=[],a=Object(J["a"])(this.companiesList);try{for(a.s();!(e=a.n()).done;){var r=e.value;t.push({linkText:r.title,city:r.city,address:r.address,status:K["a"][r.status],url:r.url,uuid:r.uuid})}}catch(n){a.e(n)}finally{a.f()}return t}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanies();case 2:e.companiesList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{getCompanies:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.list();case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(!Array.isArray(a.data)){t.next=14;break}return t.abrupt("return",a.data);case 14:r="Не удалось загрузить данные с сервера.",V["a"].showErrorAlert(r),console.log("Не удалось загрузить список юрлиц. Получен ответ ".concat(a));case 17:case"end":return t.stop()}}),t,null,[[0,6]])})))()},reloadCompanies:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanies();case 2:e.companiesList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},deleteCompany:function(e){var t=this,a={message:"Вы действительно хотите удалить юрлицо ".concat(e.linkText)};V["a"].onConfirmAction(a,function(){var a=Object(E["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=12;break}return a.prev=1,a.next=4,t.api.delete(e.uuid);case 4:a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](1),V["a"].showErrorAlert(a.t0.message),a.t0;case 10:V["a"].showSuccessEvent("Юрлицо удалено!"),t.reloadCompanies();case 12:case"end":return a.stop()}}),a,null,[[1,6]])})));return function(e){return a.apply(this,arguments)}}())},toAchiveCompany:function(e){var t=this,a="Вы действительно хотите перевести в архив юрлицо ".concat(e.linkText,"?\n      В этом случае все филиалы и работники юрлица также будут переведены в архив."),r={message:a};V["a"].onConfirmAction(r,function(){var a=Object(E["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=12;break}return a.prev=1,a.next=4,t.api.toArchive(e.uuid,!0);case 4:a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](1),V["a"].showErrorAlert(a.t0.message),a.t0;case 10:V["a"].showSuccessEvent("Юрлицо переведено в архив!"),t.reloadCompanies();case 12:case"end":return a.stop()}}),a,null,[[1,6]])})));return function(e){return a.apply(this,arguments)}}())},toWorkCompany:function(e){var t=this,a={message:"Вы действительно хотите вернуть юрлицо ".concat(e.linkText," в работу?")};V["a"].onConfirmAction(a,function(){var a=Object(E["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=12;break}return a.prev=1,a.next=4,t.api.toWork(e.uuid);case 4:a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](1),V["a"].showErrorAlert(a.t0.message),a.t0;case 10:V["a"].showSuccessEvent("Юрлицо в работе!"),t.reloadCompanies();case 12:case"end":return a.stop()}}),a,null,[[1,6]])})));return function(e){return a.apply(this,arguments)}}())}}},G=Z,Q=Object(d["a"])(G,M,H,!1,null,null,null),X=Q.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form"},[a("div",{staticClass:"form-fields d-flex flex-column mb-3"},[a("div",{staticClass:"username-field"},[a("div",{staticClass:"username-field-label subtitle-2 mb-2"},[e._v("Логин для входа в систему")]),a("div",{staticClass:"username-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.username.errors,rules:[e.rules.required,e.rules.min],label:"Логин",name:"username",counter:""},model:{value:e.fields.username.value,callback:function(t){e.$set(e.fields.username,"value",t)},expression:"fields.username.value"}})],1)]),a("div",{staticClass:"password-field"},[a("div",{staticClass:"password-field-label subtitle-2 mb-2"},[e._v("Пароль")]),a("div",{staticClass:"password-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.password.errors,"append-icon":e.showPassword?"fa-eye":"fa-eye-slash",rules:[e.rules.required,e.rules.min,e.rules.passwordMatch],type:e.showPassword?"text":"password",name:"password",hint:"Минимум 8 символов",label:"Пароль",counter:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.fields.password.value,callback:function(t){e.$set(e.fields.password,"value",t)},expression:"fields.password.value"}})],1),a("div",{staticClass:"password-field-btn-generate"},[a("v-btn",{attrs:{"x-small":"",block:"",color:"primary"},on:{click:function(t){return e.genSafePassword()}}},[e._v("Создать надежный пароль ")])],1)]),a("div",{staticClass:"email-field"},[a("div",{staticClass:"email-field-label subtitle-2 mb-2"},[e._v("E-mail")]),a("div",{staticClass:"email-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.email.errors,rules:[e.rules.required,e.rules.emailMatch],label:"Имеил",name:"email",counter:""},model:{value:e.fields.email.value,callback:function(t){e.$set(e.fields.email,"value",t)},expression:"fields.email.value"}})],1)]),a("div",{staticClass:"title-field"},[a("div",{staticClass:"title-field-label subtitle-2 mb-2"},[e._v("Название компании")]),a("div",{staticClass:"title-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.title.errors,rules:[e.rules.required],label:"Название компании",name:"title",counter:""},model:{value:e.fields.title.value,callback:function(t){e.$set(e.fields.title,"value",t)},expression:"fields.title.value"}})],1)]),a("div",{staticClass:"logo-field"},[a("div",{staticClass:"logo-field-label subtitle-2 mb-2"},[e._v("Логотип компании")]),a("div",{staticClass:"logo-field-input"},[a("v-file-input",{attrs:{"error-messages":e.fields.logo.errors,accept:".jpeg, .jpg, .png",label:"Логотип компании",name:"logo",rules:[e.rules.required]},model:{value:e.fields.logo.value,callback:function(t){e.$set(e.fields.logo,"value",t)},expression:"fields.logo.value"}})],1)]),a("div",{staticClass:"tagline-field"},[a("div",{staticClass:"tagline-field-label subtitle-2 mb-2"},[e._v("Слоган компании")]),a("div",{staticClass:"tagline-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.tagline.errors,rules:[e.rules.required],label:"Слоган",name:"tagline",counter:""},model:{value:e.fields.tagline.value,callback:function(t){e.$set(e.fields.tagline,"value",t)},expression:"fields.tagline.value"}})],1)]),a("div",{staticClass:"inn-field"},[a("div",{staticClass:"inn-field-label subtitle-2 mb-2"},[e._v("ИНН компании")]),a("div",{staticClass:"inn-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.inn.errors,rules:[e.rules.required],label:"ИНН",name:"inn",counter:""},model:{value:e.fields.inn.value,callback:function(t){e.$set(e.fields.inn,"value",t)},expression:"fields.inn.value"}})],1)]),a("div",{staticClass:"ogrn-field"},[a("div",{staticClass:"ogrn-field-label subtitle-2 mb-2"},[e._v("ОГРН/ОГРНИП компании")]),a("div",{staticClass:"ogrn-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.ogrn.errors,rules:[e.rules.required],label:"ОГРН",name:"ogrn",counter:""},model:{value:e.fields.ogrn.value,callback:function(t){e.$set(e.fields.ogrn,"value",t)},expression:"fields.ogrn.value"}})],1)]),a("div",{staticClass:"city-field"},[a("div",{staticClass:"city-field-label subtitle-2 mb-2"},[e._v("Город")]),a("div",{staticClass:"city-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.city.errors,rules:[e.rules.required],label:"Город",name:"city",counter:""},model:{value:e.fields.city.value,callback:function(t){e.$set(e.fields.city,"value",t)},expression:"fields.city.value"}})],1)]),a("div",{staticClass:"address-field"},[a("div",{staticClass:"address-field-label subtitle-2 mb-2"},[e._v("Адрес (без города)")]),a("div",{staticClass:"address-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.address.errors,rules:[e.rules.required],label:"Адрес",name:"address",counter:""},model:{value:e.fields.address.value,callback:function(t){e.$set(e.fields.address,"value",t)},expression:"fields.address.value"}})],1)]),a("div",{staticClass:"phone-field"},[a("div",{staticClass:"phone-field-label subtitle-2 mb-2"},[e._v("Телефон")]),a("div",{staticClass:"phone-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.phone.errors,rules:[e.rules.required],label:"Телефон",name:"phone",counter:""},model:{value:e.fields.phone.value,callback:function(t){e.$set(e.fields.phone,"value",t)},expression:"fields.phone.value"}})],1)])]),a("div",{staticClass:"form-btn mb-3"},[a("FormButton",{attrs:{label:"Создать юрлицо"},on:{onAction:function(t){return e.create()}}})],1),a("div",{staticClass:"form-message"},[e.successHtml?a("v-alert",{attrs:{dense:"",text:"",type:"success"},domProps:{innerHTML:e._s(e.successHtml)}}):e._e()],1)])},ee=[],te=(a("99af"),a("3724")),ae=a("bf83"),re=a("4069"),ne=a("e7e0"),oe={mixins:[te["a"]],components:{FormButton:re["a"]},data:function(){return{fields:{username:{value:"",errors:[]},password:{value:"",errors:[]},email:{value:"",errors:[]},title:{value:"",errors:[]},logo:{value:null,errors:[]},tagline:{value:"",errors:[]},inn:{value:"",errors:[]},ogrn:{value:"",errors:[]},city:{value:"",errors:[]},address:{value:"",errors:[]},phone:{value:"",errors:[]}},rules:{required:ae["a"].required("Обязательное поле."),emailMatch:ae["a"].emailMatch("Не валидный имеил."),passwordMatch:ae["a"].regexpMatch(/(?=.*[0-9])(?=.*[a-zA-Z])/,"Пароль должен содержать цифры и буквы."),min:ae["a"].minLength(6,"Минимальная длина 6 символов.")},showPassword:!1}},computed:{api:function(){return Object(A["c"])()}},methods:{afterCreate:function(e){var t=this.$router.resolve({name:"CompanyDetail",params:{companyUuid:e.uuid}});this.successHtml='\n        Юрлицо <a href="'.concat(t.href,'">').concat(e.title,"</a> успешно создано.")},genSafePassword:function(){var e=Object(ne["a"])();this.fields.password.value=e,this.showPassword=!0}}},se=oe,ie=a("0798"),ce=a("8336"),le=a("23a7"),ue=a("4bd4"),de=a("8654"),me=Object(d["a"])(se,Y,ee,!1,null,null,null),pe=me.exports;p()(me,{VAlert:ie["a"],VBtn:ce["a"],VFileInput:le["a"],VForm:ue["a"],VTextField:de["a"]});var ve={data:function(){return{search:""}},components:{CompanyListTable:X,CreateCompanyForm:pe},methods:{resetCreateCompanyForm:function(){this.$refs.createCompanyform.reset()},reloadCompanyList:function(){this.$refs.companyListTable.reloadCompanies()}}},fe=ve,he=a("169a"),be=Object(d["a"])(fe,q,W,!1,null,null,null),ye=be.exports;p()(be,{VBtn:ce["a"],VCard:$["a"],VCardActions:D["a"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VDialog:he["a"],VRow:S["a"],VTextField:de["a"]});var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v("Юрлицо "+e._s(e.companyInfo.title))])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать учетную запись ")]),a("v-card-text",[e.companyInfo.user?a("IsActiveWidget",{ref:"isActiveWidget",attrs:{isActive:e.companyInfo.user.is_active,accountUuid:e.companyInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),e.companyInfo.user?a("AccountEditForm",{ref:"accountEditForm",attrs:{accountUuid:e.companyInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),a("div",{staticClass:"password-field"},[a("v-dialog",{attrs:{"max-width":"360"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",{staticClass:"password-field-btn"},[a("v-btn",e._g(e._b({attrs:{color:"primary",small:"",block:""}},"v-btn",n,!1),r),[e._v(" Изменить пароль ")])],1)]}}]),model:{value:e.passwordDialog,callback:function(t){e.passwordDialog=t},expression:"passwordDialog"}},[a("v-card",[a("v-card-title",[e._v("Изменить пароль")]),a("v-card-text",[a("ChangePasswordForm",{attrs:{accountUuid:e.companyInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Статус юрлица ")]),a("v-card-text",[e.companyInfo.status?a("EditCompanyStatusForm",{ref:"editCompanyStatusForm",attrs:{companyUuid:e.companyUuid,companyStatus:e.companyInfo.status},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Филиалы юрлица")]),a("v-card-text",[e.companyInfo.branches?a("BranchListTable",{ref:"branchListTable",attrs:{branchList:e.companyInfo.branches,companyUuid:e.companyUuid},on:{onReload:e.reloadData}}):e._e()],1),a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetBranchCreateForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary",small:"",block:""}},"v-btn",n,!1),r),[e._v(" Добавить филиал ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Добавить новый филиал")]),a("v-card-text",[a("BranchCreateForm",{ref:"branchCreateForm",attrs:{companyUuid:e.companyUuid},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Удалить юрлицо")]),a("v-card-subtitle",{staticClass:"body-2 text-wrap-normal"},[e._v(" При удалении юрлица одновременно будет удалена вся информация о филиалах и работниках юрлица. Также будет удалена его учетная запись. ")]),a("v-card-text",[a("v-btn",{attrs:{color:"error",small:"",block:""},on:{click:function(t){return e.deleteCompany()}}},[e._v(" Удалить юрлицо ")])],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать информацию о юрлице. ")]),a("v-card-text",[e.companyInfo?a("EditCompanyForm",{ref:"editCompanyForm",attrs:{companyUuid:e.companyUuid},on:{onReload:e.reloadData}}):e._e()],1)],1)],1)],1)],1)},xe=[],Ce=a("2ef5"),we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("StatusForm",{attrs:{currentStatus:e.companyStatus},on:{onToArchive:function(t){return e.toArchve()},onToWork:function(t){return e.toWork()}}})},_e=[],ke=a("fc9d"),Ee=a("6847"),Re={components:{StatusForm:ke["a"]},props:{companyUuid:String,companyStatus:String},data:function(){return{}},computed:{api:function(){return Object(A["c"])()}},methods:{toArchve:function(){var e=this,t="Вы действительно хотите перевести в архив юрлицо?\n      В этом случае все филиалы и работники юрлица также будут переведены в архив.",a={message:t};V["a"].onConfirmAction(a,function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.toArchive(e.companyUuid,!0);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:V["a"].showSuccessEvent("Юрлицо переведено в архив. Доступ ограничен."),e.$emit(Ee["e"]);case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())},toWork:function(){var e=this,t={message:"Вы действительно хотите вернуть юрлицо в работу?"};V["a"].onConfirmAction(t,function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.toWork(e.companyUuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:V["a"].showSuccessEvent("Юрлицо в работе. Доступ разрешен."),e.$emit(Ee["e"]);case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())}}},Ue=Re,Fe=Object(d["a"])(Ue,we,_e,!1,null,null,null),Ie=Fe.exports,Ae=a("2fd8"),Ve=a("83a1"),je=a("6676"),Oe={data:function(){return{companyInfo:null,accountRole:I["a"].company[0]}},components:{EditCompanyForm:Ce["a"],AccountEditForm:R["a"],IsActiveWidget:Ae["a"],ChangePasswordForm:U["a"],EditCompanyStatusForm:Ie,BranchListTable:Ve["a"],BranchCreateForm:je["a"]},computed:{companyUuid:function(){return this.$route.params.companyUuid},api:function(){return Object(A["c"])()}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanyInfo();case 2:return e.companyInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.accountEditForm.setInitial(e.companyInfo.user),e.$refs.editCompanyForm.setInitial(e.companyInfo)}));case 5:case"end":return t.stop()}}),t)})))()},methods:{reloadData:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanyInfo();case 2:e.companyInfo=t.sent,e.$refs.accountEditForm.setInitial(e.companyInfo.user),e.$refs.editCompanyForm.setInitial(e.companyInfo);case 5:case"end":return t.stop()}}),t)})))()},getCompanyInfo:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.companyUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.companyUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:V["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о юрлице. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteCompany:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={message:"Вы действительно хотите удалить юрлицо ".concat(e.companyInfo.title)},V["a"].onConfirmAction(a,function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.delete(e.companyUuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:V["a"].showSuccessEvent("Юрлицо удалено!"),e.$router.push({name:"CompanyList"});case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},resetBranchCreateForm:function(){this.$refs.resetBranchCreateForm.reset()}}},$e=Oe,De=Object(d["a"])($e,ge,xe,!1,null,null,null),Te=De.exports;p()(De,{VBtn:ce["a"],VCard:$["a"],VCardActions:D["a"],VCardSubtitle:D["b"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VDialog:he["a"],VRow:S["a"]});var Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"mb-4"},[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v("Филиал юрлица "+e._s(e.branchInfo.company))]),a("h2",{staticClass:"subtitle-2"},[e._v(" Адрес филила: "+e._s(e.branchInfo.city)+", "+e._s(e.branchInfo.address)+" ")])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Статус филиала")]),a("v-card-text",[e.branchInfo.status?a("BranchStatusForm",{attrs:{branchStatus:e.branchInfo.status,branchUuid:e.branchUuid,companyUuid:e.companyUuid},on:{onReload:function(t){return e.reloadData()}}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Удалить филиал")]),a("v-card-subtitle",{staticClass:"body-2 text-wrap-normal"},[e._v(" При удалении филиала одновременно будет удалена вся информация о работниках этого филиала. ")]),a("v-card-text",[a("v-btn",{attrs:{color:"error",small:"",block:""},on:{click:function(t){return e.deleteBranch()}}},[e._v(" Удалить филиал ")])],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Редактировать информацию о филиале")]),a("v-card-text",[e.branchInfo?a("EditBranchForm",{ref:"editBranchForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}}):e._e()],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Сотрудники филиала")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{label:"Поиск сотрудника","single-line":"","hide-details":""},model:{value:e.searchEmployee,callback:function(t){e.searchEmployee=t},expression:"searchEmployee"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetEmployeeCreateForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),r),[e._v(" Добавить работника ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Добавить нового работника ")]),a("v-card-text",[a("EmployeeCreateForm",{ref:"employeeCreateForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}})],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("EmployeeListTable",{ref:"employeeListTable",attrs:{search:e.searchEmployee,employeeList:e.branchInfo.employees,companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}})],1)],1)],1)],1)],1)],1)],1)],1)},Se=[],Le=a("8d9c"),Be=a("9b74"),qe=a("1e2c"),We=a("5d3f"),Me={components:{BranchStatusForm:Le["a"],EditBranchForm:Be["a"],EmployeeListTable:qe["a"],EmployeeCreateForm:We["a"]},data:function(){return{branchInfo:null,searchEmployee:""}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchInfo();case 2:return e.branchInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.editBranchForm.setInitial(e.branchInfo)}));case 5:case"end":return t.stop()}}),t)})))()},computed:{branchUuid:function(){return this.$route.params.branchUuid},companyUuid:function(){return this.$route.params.companyUuid},api:function(){return Object(A["b"])(this.companyUuid)}},methods:{getBranchInfo:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.branchUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.branchUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:V["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о филиале. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},reloadData:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchInfo();case 2:e.branchInfo=t.sent,e.$refs.editBranchForm.setInitial(e.branchInfo);case 4:case"end":return t.stop()}}),t)})))()},deleteBranch:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={message:"Вы действительно хотите удалить филиал ".concat(e.branchInfo.address,"?")},V["a"].onConfirmAction(a,function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.delete(e.branchUuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:V["a"].showSuccessEvent("Филиал удален!"),e.$router.push({name:"CompanyDetail",params:{companyUuid:e.companyUuid}});case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},resetEmployeeCreateForm:function(){this.$refs.employeeCreateForm.reset()}}},He=Me,Je=Object(d["a"])(He,Pe,Se,!1,null,null,null),Ke=Je.exports;p()(Je,{VBtn:ce["a"],VCard:$["a"],VCardActions:D["a"],VCardSubtitle:D["b"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VDialog:he["a"],VRow:S["a"],VTextField:de["a"]});var ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v(e._s(e.employeeInfo.fio))])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать учетную запись ")]),a("v-card-text",[e.employeeInfo.user?a("IsActiveWidget",{ref:"isActiveWidget",attrs:{isActive:e.employeeInfo.user.is_active,accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),e.employeeInfo.user?a("AccountEditForm",{ref:"accountEditForm",attrs:{accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),a("div",{staticClass:"password-field"},[a("v-dialog",{attrs:{"max-width":"360"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",{staticClass:"password-field-btn"},[a("v-btn",e._g(e._b({attrs:{color:"primary",small:"",block:""}},"v-btn",n,!1),r),[e._v(" Изменить пароль ")])],1)]}}]),model:{value:e.passwordDialog,callback:function(t){e.passwordDialog=t},expression:"passwordDialog"}},[a("v-card",[a("v-card-title",[e._v("Изменить пароль")]),a("v-card-text",[a("ChangePasswordForm",{attrs:{accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Статус работника ")]),a("v-card-text",[e.employeeInfo.status?a("EmployeeStatusForm",{ref:"employeeStatusForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid,employeeStatus:e.employeeInfo.status},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Удалить работника")]),a("v-card-subtitle",{staticClass:"body-2 text-wrap-normal"},[e._v(" Информация о работнике будет удалена без возможности восстановления. ")]),a("v-card-text",[a("v-btn",{attrs:{color:"error",small:"",block:""},on:{click:function(t){return e.deleteEmployee()}}},[e._v(" Удалить работника ")])],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать информацию о работнике. ")]),a("v-card-text",[e.employeeInfo?a("EmployeeEditForm",{ref:"employeeEditForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Изменить должность работника. ")]),a("v-card-text",[e.employeeInfo?a("EmployeeChangePositionForm",{ref:"employeeChangePosition",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid,currentPosition:e.employeeInfo.position},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Филиал ")]),a("v-card-text",[e.employeeInfo?a("EmployeeChangeBranchForm",{key:e.componentKey,ref:"employeeChangeBranch",attrs:{companyUuid:e.companyUuid,employeeUuid:e.employeeUuid,currentBranch:e.employeeInfo.branch},on:{onReload:e.reloadData}}):e._e()],1)],1)],1)],1)],1)},Ne=[],Ze=a("9860"),Ge=a("1db6"),Qe=a("8c47"),Xe=a("6da4"),Ye={components:{AccountEditForm:R["a"],IsActiveWidget:Ae["a"],ChangePasswordForm:U["a"],EmployeeEditForm:Ze["a"],EmployeeStatusForm:Ge["a"],EmployeeChangePositionForm:Qe["a"],EmployeeChangeBranchForm:Xe["a"]},data:function(){return{employeeInfo:null,accountRole:I["a"].employee[0],changeBranchKey:0}},computed:{api:function(){return Object(A["f"])(this.companyUuid,this.branchUuid)},employeeUuid:function(){return this.$route.params.employeeUuid},branchUuid:function(){return this.$route.params.branchUuid},companyUuid:function(){return this.$route.params.companyUuid}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployeeInfo();case 2:return e.employeeInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.accountEditForm.setInitial(e.employeeInfo.user),e.$refs.employeeEditForm.setInitial(e.employeeInfo)}));case 5:case"end":return t.stop()}}),t)})))()},watch:{$route:"reloadData"},methods:{getEmployeeInfo:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.employeeUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.employeeUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:V["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о работнике. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteEmployee:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={message:"Вы действительно хотите удалить работника ".concat(e.employeeInfo.fio,"?")},V["a"].onConfirmAction(a,function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.delete(e.employeeInfo.uuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),V["a"].showErrorAlert(t.t0.message),t.t0;case 10:V["a"].showSuccessEvent("Рвботник удален!"),e.$router.push({name:"BranchDetail",params:{companyUuid:e.companyUuid,branchUuid:e.branchUuid}});case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},reloadData:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployeeInfo();case 2:e.employeeInfo=t.sent,e.$refs.accountEditForm.setInitial(e.employeeInfo.user),e.$refs.employeeEditForm.setInitial(e.employeeInfo);case 5:case"end":return t.stop()}}),t)})))()}}},et=Ye,tt=Object(d["a"])(et,ze,Ne,!1,null,null,null),at=tt.exports;p()(tt,{VBtn:ce["a"],VCard:$["a"],VCardSubtitle:D["b"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VDialog:he["a"],VRow:S["a"]});var rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-4"},[a("v-card-title",[e._v("Должности")]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{label:"Поиск должности","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetCreatePositionForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),r),[e._v(" Добавить должность ")])]}}]),model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Добавить должность")]),a("v-card-text",[a("PositionCreateForm",{ref:"createPositionForm",on:{onReload:function(t){return e.reloadPositionList()}}})],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("PositionListTable",{ref:"positionListTable",attrs:{search:e.search}})],1)],1)],1)],1)},nt=[],ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{attrs:{headers:e.headers,items:e.items,"sort-by":e.status,search:e.search,"item-class":e.getStatusClasses},scopedSlots:e._u([{key:"item.actions",fn:function(t){var r=t.item;return[a("div",{staticClass:"action-icons d-flex"},[a("div",{staticClass:"delete-btn mr-1"},[a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary","x-small":"",fab:""},on:{click:function(t){return e.deleteItem(r)}}},"v-btn",o,!1),n),[a("v-icon",{attrs:{small:""}},[e._v("fa-trash-alt")])],1)]}}],null,!0)},[e._v(" Удалить ")])],1),a("div",{staticClass:"edit-btn"},[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetEditPositionForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",e._g(e._b({staticClass:"edit-btn-tooltip"},"div",n,!1),r),[a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary","x-small":"",fab:""}},"v-btn",n,!1),r),[a("v-icon",{attrs:{small:""}},[e._v("fa-edit")])],1)]}}],null,!0)},[e._v(" Редактировать ")])],1)]}}],null,!0),model:{value:r.editDialog,callback:function(t){e.$set(r,"editDialog",t)},expression:"item.editDialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Изменить должность")]),a("v-card-text",[a("PositionEditForm",{ref:"positionEditForm",attrs:{position:r},on:{onReload:function(t){return e.reloadPositionList()}}})],1)],1)],1)],1)])]}}])})},st=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form"},[a("div",{staticClass:"form-fields d-flex flex-column mb-3"},[a("div",{staticClass:"title-field"},[a("div",{staticClass:"title-field-label subtitle-2 mb-2"},[e._v("Название должности")]),a("div",{staticClass:"title-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.title.errors,rules:[e.rules.required],label:"Название должности",name:"title",counter:""},model:{value:e.fields.title.value,callback:function(t){e.$set(e.fields.title,"value",t)},expression:"fields.title.value"}})],1)])]),a("div",{staticClass:"form-btn mb-3"},[a("FormButton",{attrs:{label:"Изменить должность",inProgress:e.inProgress},on:{onAction:function(t){return e.update()}}})],1)])},ct=[],lt=(a("b64b"),a("5e4e")),ut=a("c167"),dt={mixins:[lt["a"]],components:{FormButton:re["a"]},props:{position:Object},data:function(){return{fields:{title:{value:this.position.title,errors:[]}},inProgress:!1,rules:{required:ae["a"].required("Обязательное поле.")}}},methods:{update:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.validate()){t.next=17;break}return e.inProgress=!0,a=e.getAsFormData(),t.prev=3,t.next=6,Object(A["g"])().update(e.position.uuid,a);case 6:t.next=12;break;case 8:if(t.prev=8,t.t0=t["catch"](3),t.t0 instanceof ut["b"])for(r=0,n=Object.keys(t.t0.data);r<n.length;r++)o=n[r],e.setErrorMessages(o,t.t0.data[o]);else V["a"].showErrorAlert(t.t0.message);throw t.t0;case 12:return t.prev=12,e.inProgress=!1,t.finish(12);case 15:V["a"].showSuccessEvent("Данные изменены!"),e.$emit(Ee["e"]);case 17:case"end":return t.stop()}}),t,null,[[3,8,12,15]])})))()}}},mt=dt,pt=Object(d["a"])(mt,it,ct,!1,null,null,null),vt=pt.exports;p()(pt,{VForm:ue["a"],VTextField:de["a"]});var ft={mixins:[z["a"]],components:{PositionEditForm:vt},props:{search:String},data:function(){return{positionList:[],headers:[{text:"Должность",value:"title"},{text:"Действия",value:"actions",sortable:!1}],statuses:K["a"]}},computed:{items:function(){var e,t=[],a=Object(J["a"])(this.positionList);try{for(a.s();!(e=a.n()).done;){var r=e.value;t.push({title:r.title,status:K["a"][r.status],uuid:r.uuid,editDialog:!1})}}catch(n){a.e(n)}finally{a.f()}return t}},mounted:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPositions();case 2:e.positionList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{reloadPositionList:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPositions();case 2:e.positionList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getPositions:function(){return Object(E["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(A["g"])().list();case 3:t=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e["catch"](0),V["a"].showErrorAlert(e.t0.message),e.t0;case 10:if(!Array.isArray(t.data)){e.next=14;break}return e.abrupt("return",t.data);case 14:a="Не удалось загрузить данные с сервера.",V["a"].showErrorAlert(a),console.log("Не удалось загрузить список должностей. Получен ответ ".concat(t));case 17:case"end":return e.stop()}}),e,null,[[0,6]])})))()},deleteItem:function(e){var t=this,a={message:"Вы действительно хотите удалить должность ".concat(e.title)};V["a"].onConfirmAction(a,function(){var a=Object(E["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=12;break}return a.prev=1,a.next=4,Object(A["g"])().delete(e.uuid);case 4:a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](1),V["a"].showErrorAlert(a.t0.message),a.t0;case 10:V["a"].showSuccessEvent("Должность удалена!"),t.reloadPositionList();case 12:case"end":return a.stop()}}),a,null,[[1,6]])})));return function(e){return a.apply(this,arguments)}}())},resetEditPositionForm:function(){this.$refs.positionEditForm.reset()}}},ht=ft,bt=a("8fea"),yt=a("132d"),gt=a("3a2f"),xt=Object(d["a"])(ht,ot,st,!1,null,null,null),Ct=xt.exports;p()(xt,{VBtn:ce["a"],VCard:$["a"],VCardText:D["c"],VCardTitle:D["d"],VDataTable:bt["a"],VDialog:he["a"],VIcon:yt["a"],VTooltip:gt["a"]});var wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form"},[a("div",{staticClass:"form-fields d-flex flex-column mb-3"},[a("div",{staticClass:"title-field"},[a("div",{staticClass:"title-field-label subtitle-2 mb-2"},[e._v("Название должности")]),a("div",{staticClass:"title-field-input"},[a("v-text-field",{attrs:{"error-messages":e.fields.title.errors,rules:[e.rules.required],label:"Название должности",name:"title",counter:""},model:{value:e.fields.title.value,callback:function(t){e.$set(e.fields.title,"value",t)},expression:"fields.title.value"}})],1)])]),a("div",{staticClass:"form-btn mb-3"},[a("FormButton",{attrs:{label:"Добавить должность",inProgress:e.inProgress},on:{onAction:function(t){return e.create()}}})],1)])},_t=[],kt={mixins:[te["a"]],components:{FormButton:re["a"]},data:function(){return{fields:{title:{value:"",errors:[]}},rules:{required:ae["a"].required("Обязательное поле.")}}},computed:{api:function(){return Object(A["g"])()}},methods:{afterCreate:function(e){return V["a"].showSuccessEvent("Должность добавлена."),e}}},Et=kt,Rt=Object(d["a"])(Et,wt,_t,!1,null,null,null),Ut=Rt.exports;p()(Rt,{VForm:ue["a"],VTextField:de["a"]});var Ft={data:function(){return{search:"",createDialog:!1}},components:{PositionListTable:Ct,PositionCreateForm:Ut},methods:{resetCreatePositionForm:function(){this.$refs.createPositionForm.reset()},reloadPositionList:function(){this.$refs.positionListTable.reloadPositionList(),this.createDialog=!1}}},It=Ft,At=Object(d["a"])(It,rt,nt,!1,null,null,null),Vt=At.exports;p()(At,{VBtn:ce["a"],VCard:$["a"],VCardActions:D["a"],VCardText:D["c"],VCardTitle:D["d"],VCol:T["a"],VContainer:P["a"],VDialog:he["a"],VRow:S["a"],VTextField:de["a"]}),r["a"].use(w["a"]);var jt=[{path:"/",name:"AccountDetail",component:B},{path:"/companies",name:"CompanyList",component:ye},{path:"/companies/:companyUuid",name:"CompanyDetail",component:Te},{path:"/companies/:companyUuid/branches/:branchUuid",name:"BranchDetail",component:Ke},{path:"/companies/:companyUuid/branches/:branchUuid/employees/:employeeUuid",name:"EmployeeDetail",component:at},{path:"/positions",name:"PositionList",component:Vt}],Ot=new w["a"]({mode:"history",base:F["a"].adminBaseUrl,routes:jt}),$t=Ot,Dt=a("402c"),Tt=a("2b27"),Pt=a.n(Tt);r["a"].config.productionTip=!1,r["a"].use(Pt.a),new r["a"]({router:$t,vuetify:Dt["a"],render:function(e){return e(C)}}).$mount("#app")}});
//# sourceMappingURL=admin.js.map