(function(e){function t(t){for(var r,c,i=t[0],s=t[1],u=t[2],d=0,m=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&m.push(n[c][0]),n[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var s=a[i];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={company:0},o=[];function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([15,"chunk-vendors","chunk-common"]),a()})({15:function(e,t,a){e.exports=a("afc8")},afc8:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticClass:"modals"},[a("ErrorAlert",{ref:"errorAlert"}),a("SuccessAlert",{ref:"successAlert"}),a("ConfirmDialog",{ref:"confirmDialog"})],1),a("v-navigation-drawer",{attrs:{permanent:"",app:"",absolute:""}},[a("v-list",[a("v-list-item",[a("div",{staticClass:"profile"},[a("router-link",{attrs:{to:{name:"Profile"}}},[e._v(" Мой профиль ")])],1)]),a("v-divider"),a("v-list-item",[a("div",{staticClass:"branches"},[a("router-link",{attrs:{to:{name:"BranchList"}}},[e._v(" Филиалы ")])],1)]),a("v-divider"),a("v-divider"),a("v-list-item",[a("div",{staticClass:"docs"},[e._v(" Документация ")])])],1)],1),a("v-main",{attrs:{app:""}},[a("router-view")],1)],1)},o=[],c=a("0c72"),i=a("5c4d"),s=a("5191"),u={name:"App",data:function(){return{}},components:{ErrorAlert:c["a"],SuccessAlert:i["a"],ConfirmDialog:s["a"]}},l=u,d=a("2877"),m=a("6544"),p=a.n(m),f=a("7496"),v=a("ce7e"),h=a("8860"),b=a("da13"),y=a("f6c4"),g=a("f774"),w=Object(d["a"])(l,n,o,!1,null,null,null),x=w.exports;p()(w,{VApp:f["a"],VDivider:v["a"],VList:h["a"],VListItem:b["a"],VMain:y["a"],VNavigationDrawer:g["a"]});var C=a("8c4f"),U=a("db49"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v("Юрлицо")])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать учетную запись ")]),a("v-card-text",[e.companyInfo.user?a("AccountEditForm",{ref:"accountEditForm",attrs:{accountUuid:e.companyInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),a("div",{staticClass:"password-field"},[a("v-dialog",{attrs:{"max-width":"360"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",{staticClass:"password-field-btn"},[a("v-btn",e._g(e._b({attrs:{color:"primary",small:"",block:""}},"v-btn",n,!1),r),[e._v(" Изменить пароль ")])],1)]}}]),model:{value:e.passwordDialog,callback:function(t){e.passwordDialog=t},expression:"passwordDialog"}},[a("v-card",[a("v-card-title",[e._v("Изменить пароль")]),a("v-card-text",[a("ChangePasswordForm",{attrs:{accountUuid:e.companyInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать профиль. ")]),a("v-card-text",[e.companyInfo?a("EditCompanyForm",{ref:"editCompanyForm",attrs:{companyUuid:e.companyUuid},on:{onReload:e.reloadData}}):e._e()],1)],1)],1)],1)],1)},I=[],k=(a("96cf"),a("1da1")),R=a("a287"),E=a("a9e30"),F=a("6aa7"),V=a("29b8"),D=a("4190"),O=a("2ef5"),j={components:{AccountEditForm:V["a"],ChangePasswordForm:D["a"],EditCompanyForm:O["a"]},data:function(){return{companyInfo:null,accountRole:E["a"].company[0]}},computed:{companyUuid:function(){return this.$cookies.get(U["a"].profileUuidCookie)},api:function(){return Object(R["c"])()}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanyInfo();case 2:return e.companyInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.accountEditForm.setInitial(e.companyInfo.user),e.$refs.editCompanyForm.setInitial(e.companyInfo)}));case 5:case"end":return t.stop()}}),t)})))()},methods:{reloadData:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCompanyInfo();case 2:e.companyInfo=t.sent,e.$refs.accountEditForm.setInitial(e.companyInfo.user),e.$refs.editCompanyForm.setInitial(e.companyInfo);case 5:case"end":return t.stop()}}),t)})))()},getCompanyInfo:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.companyUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.companyUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:F["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о юрлице. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},B=j,A=a("8336"),$=a("b0af"),S=a("99d9"),T=a("62ad"),L=a("a523"),P=a("169a"),M=a("0fd9"),W=Object(d["a"])(B,_,I,!1,null,null,null),J=W.exports;p()(W,{VBtn:A["a"],VCard:$["a"],VCardText:S["c"],VCardTitle:S["d"],VCol:T["a"],VContainer:L["a"],VDialog:P["a"],VRow:M["a"]});var K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-4"},[a("v-card-title",[e._v("Филиалы")]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{label:"Поиск филиала","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetCreateCompanyForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),r),[e._v(" Добавить филиал ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Добавить новый филиал")]),a("v-card-text",[a("BranchCreateForm",{ref:"branchCreateForm",attrs:{companyUuid:e.companyUuid},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("BranchListTable",{ref:"branchListTable",attrs:{branchList:e.branchList,companyUuid:e.companyUuid,search:e.search},on:{onReload:e.reloadData}})],1)],1)],1)],1)},N=[],q=a("83a1"),z=a("6676"),G={components:{BranchListTable:q["a"],BranchCreateForm:z["a"]},data:function(){return{search:"",branchList:[]}},computed:{companyUuid:function(){return this.$cookies.get(U["a"].profileUuidCookie)},api:function(){return Object(R["b"])(this.companyUuid)}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchList();case 2:e.branchList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{getBranchList:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.list();case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(!Array.isArray(a.data)){t.next=14;break}return t.abrupt("return",a.data);case 14:F["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось загрузить список филиалов. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},reloadData:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchList();case 2:e.branchList=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},H=G,Q=a("8654"),X=Object(d["a"])(H,K,N,!1,null,null,null),Y=X.exports;p()(X,{VBtn:A["a"],VCard:$["a"],VCardActions:S["a"],VCardText:S["c"],VCardTitle:S["d"],VCol:T["a"],VContainer:L["a"],VDialog:P["a"],VRow:M["a"],VTextField:Q["a"]});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"mb-4"},[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v("Филиал юрлица "+e._s(e.branchInfo.company))]),a("h2",{staticClass:"subtitle-2"},[e._v(" Адрес филила: "+e._s(e.branchInfo.city)+", "+e._s(e.branchInfo.address)+" ")])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Статус филиала")]),a("v-card-text",[e.branchInfo.status?a("BranchStatusForm",{attrs:{branchStatus:e.branchInfo.status,branchUuid:e.branchUuid,companyUuid:e.companyUuid},on:{onReload:function(t){return e.reloadData()}}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Удалить филиал")]),a("v-card-subtitle",{staticClass:"body-2 text-wrap-normal"},[e._v(" При удалении филиала одновременно будет удалена вся информация о работниках этого филиала. ")]),a("v-card-text",[a("v-btn",{attrs:{color:"error",small:"",block:""},on:{click:function(t){return e.deleteBranch()}}},[e._v(" Удалить филиал ")])],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Редактировать информацию о филиале")]),a("v-card-text",[e.branchInfo?a("EditBranchForm",{ref:"editBranchForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}}):e._e()],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Сотрудники филиала")]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("v-text-field",{attrs:{label:"Поиск сотрудника","single-line":"","hide-details":""},model:{value:e.searchEmployee,callback:function(t){e.searchEmployee=t},expression:"searchEmployee"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-card-actions",[a("v-dialog",{attrs:{"max-width":"600px"},on:{"click:outside":function(t){return e.resetEmployeeCreateForm()}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",n,!1),r),[e._v(" Добавить работника ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Добавить нового работника ")]),a("v-card-text",[a("EmployeeCreateForm",{ref:"employeeCreateForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}})],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("EmployeeListTable",{ref:"employeeListTable",attrs:{search:e.searchEmployee,employeeList:e.branchInfo.employees,companyUuid:e.companyUuid,branchUuid:e.branchUuid},on:{onReload:function(t){return e.reloadData()}}})],1)],1)],1)],1)],1)],1)],1)],1)},ee=[],te=a("8d9c"),ae=a("9b74"),re=a("1e2c"),ne=a("5d3f"),oe={components:{BranchStatusForm:te["a"],EditBranchForm:ae["a"],EmployeeListTable:re["a"],EmployeeCreateForm:ne["a"]},data:function(){return{branchInfo:null,searchEmployee:""}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchInfo();case 2:return e.branchInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.editBranchForm.setInitial(e.branchInfo)}));case 5:case"end":return t.stop()}}),t)})))()},computed:{branchUuid:function(){return this.$route.params.branchUuid},companyUuid:function(){return this.$cookies.get(U["a"].profileUuidCookie)},api:function(){return Object(R["b"])(this.companyUuid)}},methods:{getBranchInfo:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.branchUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.branchUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:F["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о филиале. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},reloadData:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBranchInfo();case 2:e.branchInfo=t.sent,e.$refs.editBranchForm.setInitial(e.branchInfo);case 4:case"end":return t.stop()}}),t)})))()},deleteBranch:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={message:"Вы действительно хотите удалить филиал ".concat(e.branchInfo.address,"?")},F["a"].onConfirmAction(a,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.delete(e.branchUuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:F["a"].showSuccessEvent("Филиал удален!"),e.$router.push({name:"CompanyDetail",params:{companyUuid:e.companyUuid}});case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},resetEmployeeCreateForm:function(){this.$refs.employeeCreateForm.reset()}}},ce=oe,ie=Object(d["a"])(ce,Z,ee,!1,null,null,null),se=ie.exports;p()(ie,{VBtn:A["a"],VCard:$["a"],VCardActions:S["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VCol:T["a"],VContainer:L["a"],VDialog:P["a"],VRow:M["a"],VTextField:Q["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h1",{staticClass:"title"},[e._v(e._s(e.employeeInfo.fio))])])],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("div",{staticClass:"d-flex flex-column"},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать учетную запись ")]),a("v-card-text",[e.employeeInfo.user?a("IsActiveWidget",{ref:"isActiveWidget",attrs:{isActive:e.employeeInfo.user.is_active,accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),e.employeeInfo.user?a("AccountEditForm",{ref:"accountEditForm",attrs:{accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}}):e._e(),a("div",{staticClass:"password-field"},[a("v-dialog",{attrs:{"max-width":"360"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",{staticClass:"password-field-btn"},[a("v-btn",e._g(e._b({attrs:{color:"primary",small:"",block:""}},"v-btn",n,!1),r),[e._v(" Изменить пароль ")])],1)]}}]),model:{value:e.passwordDialog,callback:function(t){e.passwordDialog=t},expression:"passwordDialog"}},[a("v-card",[a("v-card-title",[e._v("Изменить пароль")]),a("v-card-text",[a("ChangePasswordForm",{attrs:{accountUuid:e.employeeInfo.user.uuid,accountRole:e.accountRole},on:{onReload:e.reloadData}})],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Статус работника ")]),a("v-card-text",[e.employeeInfo.status?a("EmployeeStatusForm",{ref:"employeeStatusForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid,employeeStatus:e.employeeInfo.status},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v("Удалить работника")]),a("v-card-subtitle",{staticClass:"body-2 text-wrap-normal"},[e._v(" Информация о работнике будет удалена без возможности восстановления. ")]),a("v-card-text",[a("v-btn",{attrs:{color:"error",small:"",block:""},on:{click:function(t){return e.deleteEmployee()}}},[e._v(" Удалить работника ")])],1)],1)],1)]),a("v-col",{attrs:{cols:"7"}},[a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Редактировать информацию о работнике. ")]),a("v-card-text",[e.employeeInfo?a("EmployeeEditForm",{ref:"employeeEditForm",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Изменить должность работника. ")]),a("v-card-text",[e.employeeInfo?a("EmployeeChangePositionForm",{ref:"employeeChangePosition",attrs:{companyUuid:e.companyUuid,branchUuid:e.branchUuid,employeeUuid:e.employeeUuid,currentPosition:e.employeeInfo.position},on:{onReload:e.reloadData}}):e._e()],1)],1),a("v-card",[a("v-card-title",{staticClass:"subtitle-1"},[e._v(" Филиал ")]),a("v-card-text",[e.employeeInfo?a("EmployeeChangeBranchForm",{key:e.componentKey,ref:"employeeChangeBranch",attrs:{companyUuid:e.companyUuid,employeeUuid:e.employeeUuid,currentBranch:e.employeeInfo.branch},on:{onReload:e.reloadData}}):e._e()],1)],1)],1)],1)],1)},le=[],de=a("2fd8"),me=a("9860"),pe=a("1db6"),fe=a("8c47"),ve=a("6da4"),he={components:{AccountEditForm:V["a"],IsActiveWidget:de["a"],ChangePasswordForm:D["a"],EmployeeEditForm:me["a"],EmployeeStatusForm:pe["a"],EmployeeChangePositionForm:fe["a"],EmployeeChangeBranchForm:ve["a"]},data:function(){return{employeeInfo:null,accountRole:E["a"].employee[0],changeBranchKey:0}},computed:{api:function(){return Object(R["f"])(this.companyUuid,this.branchUuid)},employeeUuid:function(){return this.$route.params.employeeUuid},branchUuid:function(){return this.$route.params.branchUuid},companyUuid:function(){return this.$cookies.get(U["a"].profileUuidCookie)}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployeeInfo();case 2:return e.employeeInfo=t.sent,t.next=5,e.$nextTick((function(){e.$refs.accountEditForm.setInitial(e.employeeInfo.user),e.$refs.employeeEditForm.setInitial(e.employeeInfo)}));case 5:case"end":return t.stop()}}),t)})))()},watch:{$route:"reloadData"},methods:{getEmployeeInfo:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.detail(e.employeeUuid);case 3:a=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](0),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:if(a.data.uuid!=e.employeeUuid){t.next=14;break}return t.abrupt("return",a.data);case 14:F["a"].showErrorAlert("Не удалось загрузить данные с сервера."),console.log("Не удалось информацию о работнике. Получен ответ ".concat(a));case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteEmployee:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={message:"Вы действительно хотите удалить работника ".concat(e.employeeInfo.fio,"?")},F["a"].onConfirmAction(a,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,e.api.delete(e.employeeInfo.uuid);case 4:t.next=10;break;case 6:throw t.prev=6,t.t0=t["catch"](1),F["a"].showErrorAlert(t.t0.message),t.t0;case 10:F["a"].showSuccessEvent("Рвботник удален!"),e.$router.push({name:"BranchDetail",params:{companyUuid:e.companyUuid,branchUuid:e.branchUuid}});case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},reloadData:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployeeInfo();case 2:e.employeeInfo=t.sent,e.$refs.accountEditForm.setInitial(e.employeeInfo.user),e.$refs.employeeEditForm.setInitial(e.employeeInfo);case 5:case"end":return t.stop()}}),t)})))()}}},be=he,ye=Object(d["a"])(be,ue,le,!1,null,null,null),ge=ye.exports;p()(ye,{VBtn:A["a"],VCard:$["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VCol:T["a"],VContainer:L["a"],VDialog:P["a"],VRow:M["a"]}),r["a"].use(C["a"]);var we=[{path:"/",name:"Profile",component:J},{path:"/branches",name:"BranchList",component:Y},{path:"/:companyUuid/branches/:branchUuid",name:"BranchDetail",component:se},{path:"/companies/:companyUuid/branches/:branchUuid/employees/:employeeUuid",name:"EmployeeDetail",component:ge}],xe=new C["a"]({mode:"history",base:U["a"].companyBaseUrl,routes:we}),Ce=xe,Ue=a("402c"),_e=a("2b27"),Ie=a.n(_e);r["a"].config.productionTip=!1,r["a"].use(Ie.a),new r["a"]({router:Ce,vuetify:Ue["a"],render:function(e){return e(x)}}).$mount("#app")}});
//# sourceMappingURL=company.js.map